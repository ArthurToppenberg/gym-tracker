"use strict";exports.id=699,exports.ids=[699],exports.modules={574:(e,r,t)=>{function n(e){return"object"==typeof e&&null!==e&&"subscribe"in e}t.d(r,{S:()=>g});function a(e,r){let t=(function(e,r){let t=null,n=()=>{t?.unsubscribe(),t=null,r.removeEventListener("abort",n)};return new ReadableStream({start(a){t=e.subscribe({next(e){a.enqueue({ok:!0,value:e})},error(e){a.enqueue({ok:!1,error:e}),a.close()},complete(){a.close()}}),r.aborted?n():r.addEventListener("abort",n,{once:!0})},cancel(){n()}})})(e,r).getReader(),n={async next(){let e=await t.read();if(e.done)return{value:void 0,done:!0};let{value:r}=e;if(!r.ok)throw r.error;return{value:r.value,done:!1}},return:async()=>(await t.cancel(),{value:void 0,done:!0})};return{[Symbol.asyncIterator]:()=>n}}var s=t(8945),o=t(5089),i=t(5722),l=t(3563),u=t(2058),c=t(1412),f=t(6071),p=t(8037);function d(e){return(0,c.eF)(async function*(){throw e})}let y={mutation:["POST"],query:["GET"],subscription:["GET"]},h={mutation:["POST"],query:["GET","POST"],subscription:["GET","POST"]};function m(e){let{ctx:r,info:t,responseMeta:n,untransformedJSON:a,errors:s=[],headers:o}=e,i=a?(0,p.E$)(a):200,l=!a,u=l?[]:Array.isArray(a)?a:[a],c=n?.({ctx:r,info:t,paths:t?.calls.map(e=>e.path),data:u,errors:s,eagerGeneration:l,type:t?.calls.find(e=>e.procedure?._def.type)?.procedure?._def.type??"unknown"})??{};if(c.headers)if(c.headers instanceof Headers)for(let[e,r]of c.headers.entries())o.append(e,r);else for(let[e,r]of Object.entries(c.headers))if(Array.isArray(r))for(let t of r)o.append(e,t);else"string"==typeof r&&o.set(e,r);return c.status&&(i=c.status),{status:i}}function E(e){return!!(0,c.Gv)(e)&&(!!(0,c.Td)(e)||Object.values(e).some(i.yL)||Object.values(e).some(c.Td))}async function g(e){let{router:r,req:t}=e,p=new Headers([["vary","trpc-accept"]]),g=r._def._config,w=new URL(t.url);if("HEAD"===t.method)return new Response(null,{status:204});let b=e.allowBatching??e.batching?.enabled??!0,v=(e.allowMethodOverride??!1)&&"POST"===t.method,O=await (0,c.eF)(async()=>{try{return[void 0,await (0,f.G)({req:t,path:decodeURIComponent(e.path),router:r,searchParams:w.searchParams,headers:e.req.headers,url:w})]}catch(e){return[(0,o.qO)(e),void 0]}}),S=(0,c.eF)(()=>{let r;return{valueOrUndefined:()=>{if(r)return r[1]},value:()=>{let[e,t]=r;if(e)throw e;return t},create:async t=>{if(r)throw Error("This should only be called once - report a bug in tRPC");try{let n=await e.createContext({info:t});r=[void 0,n]}catch(e){r=[(0,o.qO)(e),void 0]}}}}),_=v?h:y,T="application/jsonl"===t.headers.get("trpc-accept"),R=g.sse?.enabled??!0;try{let[r,f]=O;if(r)throw r;if(f.isBatchCall&&!b)throw new o.gt({code:"BAD_REQUEST",message:"Batching is not enabled on the server"});if(T&&!f.isBatchCall)throw new o.gt({message:"Streaming requests must be batched (you can do a batch of 1)",code:"BAD_REQUEST"});await S.create(f);let y=f.calls.map(async r=>{let n=r.procedure;try{if(e.error)throw e.error;if(!n)throw new o.gt({code:"NOT_FOUND",message:`No procedure found on path "${r.path}"`});if(!_[n._def.type].includes(t.method))throw new o.gt({code:"METHOD_NOT_SUPPORTED",message:`Unsupported ${t.method}-request to ${n._def.type} procedure at path "${r.path}"`});if("subscription"===n._def.type&&f.isBatchCall)throw new o.gt({code:"BAD_REQUEST",message:"Cannot batch subscription calls"});let a=await n({path:r.path,getRawInput:r.getRawInput,ctx:S.value(),type:n._def.type,signal:e.req.signal});return[void 0,{data:a}]}catch(a){let t=(0,o.qO)(a),n=r.result();return e.onError?.({error:t,path:r.path,input:n,ctx:S.valueOrUndefined(),type:r.procedure?._def.type??"unknown",req:e.req}),[t,void 0]}});if(!f.isBatchCall){let[r]=f.calls,[t,i]=await y[0];switch(f.type){case"unknown":case"mutation":case"query":{if(p.set("content-type","application/json"),E(i?.data))throw new o.gt({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"});let n=t?{error:(0,s.K)({config:g,ctx:S.valueOrUndefined(),error:t,input:r.result(),path:r.path,type:f.type})}:{result:{data:i.data}},a=m({ctx:S.valueOrUndefined(),info:f,responseMeta:e.responseMeta,errors:t?[t]:[],headers:p,untransformedJSON:[n]});return new Response(JSON.stringify((0,u.t9)(g,n)),{status:a.status,headers:p})}case"subscription":{let u=(0,c.eF)(()=>t?d(t):R?n(i.data)||(0,c.Td)(i.data)?n(i.data)?a(i.data,e.req.signal):i.data:d(new o.gt({message:`Subscription ${r.path} did not return an observable or a AsyncGenerator`,code:"INTERNAL_SERVER_ERROR"})):d(new o.gt({code:"METHOD_NOT_SUPPORTED",message:'Missing experimental flag "sseSubscriptions"'}))),y=(0,l.kN)({...g.sse,data:u,serialize:e=>g.transformer.output.serialize(e),formatError(t){let n=(0,o.qO)(t.error),a=r?.result(),i=r?.path,l=r?.procedure?._def.type??"unknown";return e.onError?.({error:n,path:i,input:a,ctx:S.valueOrUndefined(),req:e.req,type:l}),(0,s.K)({config:g,ctx:S.valueOrUndefined(),error:n,input:a,path:i,type:l})}});for(let[e,r]of Object.entries(l.w7))p.set(e,r);let h=m({ctx:S.valueOrUndefined(),info:f,responseMeta:e.responseMeta,errors:[],headers:p,untransformedJSON:null});return new Response(y,{headers:p,status:h.status})}}}if("application/jsonl"===f.accept){p.set("content-type","application/json"),p.set("transfer-encoding","chunked");let r=m({ctx:S.valueOrUndefined(),info:f,responseMeta:e.responseMeta,errors:[],headers:p,untransformedJSON:null}),t=(0,i.jU)({...g.jsonl,maxDepth:1/0,data:y.map(async r=>{let[t,o]=await r,i=f.calls[0];if(t)return{error:(0,s.K)({config:g,ctx:S.valueOrUndefined(),error:t,input:i.result(),path:i.path,type:i.procedure?._def.type??"unknown"})};let l=n(o.data)?a(o.data,e.req.signal):Promise.resolve(o.data);return{result:Promise.resolve({data:l})}}),serialize:g.transformer.output.serialize,onError:r=>{e.onError?.({error:(0,o.qO)(r),path:void 0,input:void 0,ctx:S.valueOrUndefined(),req:e.req,type:f?.type??"unknown"})},formatError(e){let r=f?.calls[e.path[0]],t=(0,o.qO)(e.error),n=r?.result(),a=r?.path,i=r?.procedure?._def.type??"unknown";return(0,s.K)({config:g,ctx:S.valueOrUndefined(),error:t,input:n,path:a,type:i})}});return new Response(t,{headers:p,status:r.status})}p.set("content-type","application/json");let h=(await Promise.all(y)).map(e=>{let[r,t]=e;return r?e:E(t.data)?[new o.gt({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"}),void 0]:e}),w=h.map(([e,r],t)=>{let n=f.calls[t];return e?{error:(0,s.K)({config:g,ctx:S.valueOrUndefined(),error:e,input:n.result(),path:n.path,type:n.procedure?._def.type??"unknown"})}:{result:{data:r.data}}}),v=h.map(([e])=>e).filter(Boolean),P=m({ctx:S.valueOrUndefined(),info:f,responseMeta:e.responseMeta,untransformedJSON:w,errors:v,headers:p});return new Response(JSON.stringify((0,u.t9)(g,w)),{status:P.status,headers:p})}catch(c){let[r,t]=O,n=S.valueOrUndefined(),{error:a,untransformedJSON:i,body:l}=function(e,r){let{router:t,req:n,onError:a}=r.opts,i=(0,o.qO)(e);a?.({error:i,path:r.path,input:r.input,ctx:r.ctx,type:r.type,req:n});let l={error:(0,s.K)({config:t._def._config,error:i,type:r.type,path:r.path,input:r.input,ctx:r.ctx})},c=JSON.stringify((0,u.t9)(t._def._config,l));return{error:i,untransformedJSON:l,body:c}}(c,{opts:e,ctx:S.valueOrUndefined(),type:t?.type??"unknown"});return new Response(l,{status:m({ctx:n,info:t,responseMeta:e.responseMeta,untransformedJSON:i,errors:[a],headers:p}).status,headers:p})}}},625:(e,r,t)=>{var n,a,s,o,i;t.d(r,{Ay:()=>ee});class l{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,r){this.keyToValue.set(e,r),this.valueToKey.set(r,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class u{constructor(e){this.generateIdentifier=e,this.kv=new l}register(e,r){this.kv.getByValue(e)||(r||(r=this.generateIdentifier(e)),this.kv.set(r,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class c extends u{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,r){"object"==typeof r?(r.allowProps&&this.classToAllowedProps.set(e,r.allowProps),super.register(e,r.identifier)):super.register(e,r)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function f(e,r){Object.entries(e).forEach(([e,t])=>r(t,e))}function p(e,r){return -1!==e.indexOf(r)}function d(e,r){for(let t=0;t<e.length;t++){let n=e[t];if(r(n))return n}}class y{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return function(e,r){let t=function(e){if("values"in Object)return Object.values(e);let r=[];for(let t in e)e.hasOwnProperty(t)&&r.push(e[t]);return r}(e);if("find"in t)return t.find(r);for(let e=0;e<t.length;e++){let n=t[e];if(r(n))return n}}(this.transfomers,r=>r.isApplicable(e))}findByName(e){return this.transfomers[e]}}let h=e=>Object.prototype.toString.call(e).slice(8,-1),m=e=>void 0===e,E=e=>null===e,g=e=>"object"==typeof e&&null!==e&&e!==Object.prototype&&(null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e)===Object.prototype),w=e=>g(e)&&0===Object.keys(e).length,b=e=>Array.isArray(e),v=e=>"string"==typeof e,O=e=>"number"==typeof e&&!isNaN(e),S=e=>"boolean"==typeof e,_=e=>e instanceof Map,T=e=>e instanceof Set,R=e=>"Symbol"===h(e),P=e=>"number"==typeof e&&isNaN(e),A=e=>S(e)||E(e)||m(e)||O(e)||v(e)||R(e),I=e=>e===1/0||e===-1/0,D=e=>e.replace(/\./g,"\\."),N=e=>e.map(String).map(D).join("."),j=e=>{let r=[],t="";for(let n=0;n<e.length;n++){let a=e.charAt(n);if("\\"===a&&"."===e.charAt(n+1)){t+=".",n++;continue}if("."===a){r.push(t),t="";continue}t+=a}let n=t;return r.push(n),r};function k(e,r,t,n){return{isApplicable:e,annotation:r,transform:t,untransform:n}}let x=[k(m,"undefined",()=>null,()=>void 0),k(e=>"bigint"==typeof e,"bigint",e=>e.toString(),e=>"undefined"!=typeof BigInt?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),k(e=>e instanceof Date&&!isNaN(e.valueOf()),"Date",e=>e.toISOString(),e=>new Date(e)),k(e=>e instanceof Error,"Error",(e,r)=>{let t={name:e.name,message:e.message};return r.allowedErrorProps.forEach(r=>{t[r]=e[r]}),t},(e,r)=>{let t=Error(e.message);return t.name=e.name,t.stack=e.stack,r.allowedErrorProps.forEach(r=>{t[r]=e[r]}),t}),k(e=>e instanceof RegExp,"regexp",e=>""+e,e=>new RegExp(e.slice(1,e.lastIndexOf("/")),e.slice(e.lastIndexOf("/")+1))),k(T,"set",e=>[...e.values()],e=>new Set(e)),k(_,"map",e=>[...e.entries()],e=>new Map(e)),k(e=>P(e)||I(e),"number",e=>P(e)?"NaN":e>0?"Infinity":"-Infinity",Number),k(e=>0===e&&1/e==-1/0,"number",()=>"-0",Number),k(e=>e instanceof URL,"URL",e=>e.toString(),e=>new URL(e))];function U(e,r,t,n){return{isApplicable:e,annotation:r,transform:t,untransform:n}}let M=U((e,r)=>!!R(e)&&!!r.symbolRegistry.getIdentifier(e),(e,r)=>["symbol",r.symbolRegistry.getIdentifier(e)],e=>e.description,(e,r,t)=>{let n=t.symbolRegistry.getValue(r[1]);if(!n)throw Error("Trying to deserialize unknown symbol");return n}),C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,r)=>(e[r.name]=r,e),{}),q=U(e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),e=>["typed-array",e.constructor.name],e=>[...e],(e,r)=>{let t=C[r[1]];if(!t)throw Error("Trying to deserialize unknown typed array");return new t(e)});function L(e,r){return!!e?.constructor&&!!r.classRegistry.getIdentifier(e.constructor)}let z=U(L,(e,r)=>["class",r.classRegistry.getIdentifier(e.constructor)],(e,r)=>{let t=r.classRegistry.getAllowedProps(e.constructor);if(!t)return{...e};let n={};return t.forEach(r=>{n[r]=e[r]}),n},(e,r,t)=>{let n=t.classRegistry.getValue(r[1]);if(!n)throw Error(`Trying to deserialize unknown class '${r[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(n.prototype),e)}),B=U((e,r)=>!!r.customTransformerRegistry.findApplicable(e),(e,r)=>["custom",r.customTransformerRegistry.findApplicable(e).name],(e,r)=>r.customTransformerRegistry.findApplicable(e).serialize(e),(e,r,t)=>{let n=t.customTransformerRegistry.findByName(r[1]);if(!n)throw Error("Trying to deserialize unknown custom value");return n.deserialize(e)}),V=[z,M,B,q],$=(e,r)=>{let t=d(V,t=>t.isApplicable(e,r));if(t)return{value:t.transform(e,r),type:t.annotation(e,r)};let n=d(x,t=>t.isApplicable(e,r));if(n)return{value:n.transform(e,r),type:n.annotation}},F={};x.forEach(e=>{F[e.annotation]=e});let G=(e,r,t)=>{if(b(r))switch(r[0]){case"symbol":return M.untransform(e,r,t);case"class":return z.untransform(e,r,t);case"custom":return B.untransform(e,r,t);case"typed-array":return q.untransform(e,r,t);default:throw Error("Unknown transformation: "+r)}{let n=F[r];if(!n)throw Error("Unknown transformation: "+r);return n.untransform(e,t)}},J=(e,r)=>{if(r>e.size)throw Error("index out of bounds");let t=e.keys();for(;r>0;)t.next(),r--;return t.next().value};function Q(e){if(p(e,"__proto__"))throw Error("__proto__ is not allowed as a property");if(p(e,"prototype"))throw Error("prototype is not allowed as a property");if(p(e,"constructor"))throw Error("constructor is not allowed as a property")}let Y=(e,r)=>{Q(r);for(let t=0;t<r.length;t++){let n=r[t];if(T(e))e=J(e,+n);else if(_(e)){let a=+n,s=0==+r[++t]?"key":"value",o=J(e,a);switch(s){case"key":e=o;break;case"value":e=e.get(o)}}else e=e[n]}return e},H=(e,r,t)=>{if(Q(r),0===r.length)return t(e);let n=e;for(let e=0;e<r.length-1;e++){let t=r[e];if(b(n))n=n[+t];else if(g(n))n=n[t];else if(T(n))n=J(n,+t);else if(_(n)){if(e===r.length-2)break;let a=+t,s=0==+r[++e]?"key":"value",o=J(n,a);switch(s){case"key":n=o;break;case"value":n=n.get(o)}}}let a=r[r.length-1];if(b(n)?n[+a]=t(n[+a]):g(n)&&(n[a]=t(n[a])),T(n)){let e=J(n,+a),r=t(e);e!==r&&(n.delete(e),n.add(r))}if(_(n)){let e=J(n,+r[r.length-2]);switch(0==+a?"key":"value"){case"key":{let r=t(e);n.set(r,n.get(e)),r!==e&&n.delete(e);break}case"value":n.set(e,t(n.get(e)))}}return e},K=(e,r)=>g(e)||b(e)||_(e)||T(e)||L(e,r),W=(e,r,t,n,a=[],s=[],o=new Map)=>{let i=A(e);if(!i){!function(e,r,t){let n=t.get(e);n?n.push(r):t.set(e,[r])}(e,a,r);let t=o.get(e);if(t)return n?{transformedValue:null}:t}if(!K(e,t)){let r=$(e,t),n=r?{transformedValue:r.value,annotations:[r.type]}:{transformedValue:e};return i||o.set(e,n),n}if(p(s,e))return{transformedValue:null};let l=$(e,t),u=l?.value??e,c=b(u)?[]:{},d={};f(u,(i,l)=>{if("__proto__"===l||"constructor"===l||"prototype"===l)throw Error(`Detected property ${l}. This is a prototype pollution risk, please remove it from your object.`);let u=W(i,r,t,n,[...a,l],[...s,e],o);c[l]=u.transformedValue,b(u.annotations)?d[l]=u.annotations:g(u.annotations)&&f(u.annotations,(e,r)=>{d[D(l)+"."+r]=e})});let y=w(d)?{transformedValue:c,annotations:l?[l.type]:void 0}:{transformedValue:c,annotations:l?[l.type,d]:d};return i||o.set(e,y),y};function X(e){return Object.prototype.toString.call(e).slice(8,-1)}function Z(e){return"Array"===X(e)}n=function(e){return"Null"===X(e)},a=function(e){return"Undefined"===X(e)};class ee{constructor({dedupe:e=!1}={}){this.classRegistry=new c,this.symbolRegistry=new u(e=>e.description??""),this.customTransformerRegistry=new y,this.allowedErrorProps=[],this.dedupe=e}serialize(e){let r=new Map,t=W(e,r,this,this.dedupe),n={json:t.transformedValue};t.annotations&&(n.meta={...n.meta,values:t.annotations});let a=function(e,r){let t,n={};return(e.forEach(e=>{if(e.length<=1)return;r||(e=e.map(e=>e.map(String)).sort((e,r)=>e.length-r.length));let[a,...s]=e;0===a.length?t=s.map(N):n[N(a)]=s.map(N)}),t)?w(n)?[t]:[t,n]:w(n)?void 0:n}(r,this.dedupe);return a&&(n.meta={...n.meta,referentialEqualities:a}),n}deserialize(e){var r,t,n;let{json:a,meta:s}=e,o=function e(r,t={}){return Z(r)?r.map(r=>e(r,t)):!function(e){if("Object"!==X(e))return!1;let r=Object.getPrototypeOf(e);return!!r&&r.constructor===Object&&r===Object.prototype}(r)?r:[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)].reduce((n,a)=>{if(Z(t.props)&&!t.props.includes(a))return n;let s=e(r[a],t);var o=t.nonenumerable;let i=({}).propertyIsEnumerable.call(r,a)?"enumerable":"nonenumerable";return"enumerable"===i&&(n[a]=s),o&&"nonenumerable"===i&&Object.defineProperty(n,a,{value:s,enumerable:!1,writable:!0,configurable:!0}),n},{})}(a);return s?.values&&(r=o,t=s.values,n=this,function e(r,t,n=[]){if(!r)return;if(!b(r))return void f(r,(r,a)=>e(r,t,[...n,...j(a)]));let[a,s]=r;s&&f(s,(r,a)=>{e(r,t,[...n,...j(a)])}),t(a,n)}(t,(e,t)=>{r=H(r,t,r=>G(r,e,n))}),o=r),s?.referentialEqualities&&(o=function(e,r){function t(r,t){let n=Y(e,j(t));r.map(j).forEach(r=>{e=H(e,r,()=>n)})}if(b(r)){let[n,a]=r;n.forEach(r=>{e=H(e,j(r),()=>e)}),a&&f(a,t)}else f(r,t);return e}(o,s.referentialEqualities)),o}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,r){this.classRegistry.register(e,r)}registerSymbol(e,r){this.symbolRegistry.register(e,r)}registerCustom(e,r){this.customTransformerRegistry.register({name:r,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}ee.defaultInstance=new ee,ee.serialize=ee.defaultInstance.serialize.bind(ee.defaultInstance),ee.deserialize=ee.defaultInstance.deserialize.bind(ee.defaultInstance),ee.stringify=ee.defaultInstance.stringify.bind(ee.defaultInstance),ee.parse=ee.defaultInstance.parse.bind(ee.defaultInstance),ee.registerClass=ee.defaultInstance.registerClass.bind(ee.defaultInstance),ee.registerSymbol=ee.defaultInstance.registerSymbol.bind(ee.defaultInstance),ee.registerCustom=ee.defaultInstance.registerCustom.bind(ee.defaultInstance),ee.allowErrorProps=ee.defaultInstance.allowErrorProps.bind(ee.defaultInstance),ee.serialize,ee.deserialize,ee.stringify,ee.parse,ee.registerClass,ee.registerCustom,ee.registerSymbol,ee.allowErrorProps},1243:(e,r,t)=>{t.d(r,{z:()=>s});var n=t(5089),a=t(1412);function s(e){let r;try{r=JSON.parse(e)}catch(e){throw new n.gt({code:"PARSE_ERROR",message:"Not JSON-parsable query params",cause:e})}var t=r;try{if(null===t)return null;if(!(0,a.Gv)(t))throw Error("Expected object");let e=Object.entries(t).filter(([e,r])=>"string"!=typeof r);if(e.length>0)throw Error(`Expected connectionParams to be string values. Got ${e.map(([e,r])=>`${e}: ${typeof r}`).join(", ")}`);return t}catch(e){throw new n.gt({code:"PARSE_ERROR",message:"Invalid connection params shape",cause:e})}}},1258:(e,r,t)=>{t.d(r,{d:()=>n});function n(e){let r=e[Symbol.asyncIterator]();return new ReadableStream({async cancel(){await r.return?.()},async pull(e){let t=await r.next();if(t.done)return void e.close();e.enqueue(t.value)}})}},1412:(e,r,t)=>{t.d(r,{D_:()=>f,Gv:()=>s,IT:()=>n,QQ:()=>i,Td:()=>u,Tn:()=>o,eF:()=>c,uf:()=>a});let n=Symbol();function a(e,...r){let t=Object.assign(Object.create(null),e);for(let e of r)for(let r in e){if(r in t&&t[r]!==e[r])throw Error(`Duplicate key ${r}`);t[r]=e[r]}return t}function s(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}function o(e){return"function"==typeof e}function i(e){return Object.assign(Object.create(null),e)}let l="function"==typeof Symbol&&!!Symbol.asyncIterator;function u(e){return l&&s(e)&&Symbol.asyncIterator in e}let c=e=>e();function f(e){return e}},1940:(e,r,t)=>{var n;function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t.d(r,{V:()=>i});let s=new WeakMap,o=()=>{};n=Symbol.toStringTag;class i{subscribe(){let e,r,{settlement:t}=this;if(null===t){var n;let t,a;if(null===this.subscribers)throw Error("Unpromise settled but still has subscribers");let s={promise:new Promise((e,r)=>{t=e,a=r}),resolve:t,reject:a};this.subscribers=(n=this.subscribers,[...n,s]),e=s.promise,r=()=>{null!==this.subscribers&&(this.subscribers=function(e,r){let t=e.indexOf(r);if(-1!==t)return[...e.slice(0,t),...e.slice(t+1)];return e}(this.subscribers,s))}}else{let{status:n}=t;e="fulfilled"===n?Promise.resolve(t.value):Promise.reject(t.reason),r=o}return Object.assign(e,{unsubscribe:r})}then(e,r){let t=this.subscribe(),{unsubscribe:n}=t;return Object.assign(t.then(e,r),{unsubscribe:n})}catch(e){let r=this.subscribe(),{unsubscribe:t}=r;return Object.assign(r.catch(e),{unsubscribe:t})}finally(e){let r=this.subscribe(),{unsubscribe:t}=r;return Object.assign(r.finally(e),{unsubscribe:t})}static proxy(e){let r=i.getSubscribablePromise(e);return void 0!==r?r:i.createSubscribablePromise(e)}static createSubscribablePromise(e){let r=new i(e);return s.set(e,r),s.set(r,r),r}static getSubscribablePromise(e){return s.get(e)}static resolve(e){let r="object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e);return i.proxy(r).subscribe()}static async any(e){let r=(Array.isArray(e)?e:[...e]).map(i.resolve);try{return await Promise.any(r)}finally{r.forEach(({unsubscribe:e})=>{e()})}}static async race(e){let r=(Array.isArray(e)?e:[...e]).map(i.resolve);try{return await Promise.race(r)}finally{r.forEach(({unsubscribe:e})=>{e()})}}static async raceReferences(e){let r=e.map(l);try{return await Promise.race(r)}finally{for(let e of r)e.unsubscribe()}}constructor(e){a(this,"promise",void 0),a(this,"subscribers",[]),a(this,"settlement",null),a(this,n,"Unpromise"),"function"==typeof e?this.promise=new Promise(e):this.promise=e;let r=this.promise.then(e=>{let{subscribers:r}=this;this.subscribers=null,this.settlement={status:"fulfilled",value:e},r?.forEach(({resolve:r})=>{r(e)})});"catch"in r&&r.catch(e=>{let{subscribers:r}=this;this.subscribers=null,this.settlement={status:"rejected",reason:e},r?.forEach(({reject:r})=>{r(e)})})}}function l(e){return i.proxy(e).then(()=>[e])}},2058:(e,r,t)=>{function n(e){return"input"in e?e:{input:e,output:e}}t.d(r,{bJ:()=>a,t9:()=>o,u$:()=>n}),t(1412);let a={input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}};function s(e,r){return"error"in r?{...r,error:e.transformer.output.serialize(r.error)}:"data"in r.result?{...r,result:{...r.result,data:e.transformer.output.serialize(r.result.data)}}:r}function o(e,r){return Array.isArray(r)?r.map(r=>s(e,r)):s(e,r)}},2493:(e,r,t)=>{t.d(r,{Y:()=>n,u:()=>a});let n={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,BAD_GATEWAY:-32603,SERVICE_UNAVAILABLE:-32603,GATEWAY_TIMEOUT:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNSUPPORTED_MEDIA_TYPE:-32015,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099},a={[-32700]:"PARSE_ERROR",[-32600]:"BAD_REQUEST",[-32603]:"INTERNAL_SERVER_ERROR",[-32001]:"UNAUTHORIZED",[-32003]:"FORBIDDEN",[-32004]:"NOT_FOUND",[-32005]:"METHOD_NOT_SUPPORTED",[-32008]:"TIMEOUT",[-32009]:"CONFLICT",[-32012]:"PRECONDITION_FAILED",[-32013]:"PAYLOAD_TOO_LARGE",[-32015]:"UNSUPPORTED_MEDIA_TYPE",[-32022]:"UNPROCESSABLE_CONTENT",[-32029]:"TOO_MANY_REQUESTS",[-32099]:"CLIENT_CLOSED_REQUEST"}},3156:(e,r,t)=>{t.d(r,{P:()=>s,z:()=>a});var n=t(1412);function a(e){return(0,n.Gv)(e)&&"AbortError"===e.name}function s(e="AbortError"){throw new DOMException(e,"AbortError")}},3417:(e,r,t)=>{t.d(r,{_:()=>s,s:()=>a});var n=t(7540);let a=Symbol();function s(e){let r=null;return(0,n.T)({start(){if(r)throw Error("Timer already started");return new Promise(t=>{r=setTimeout(()=>t(a),e)})}},()=>{r&&clearTimeout(r)})}},3563:(e,r,t)=>{t.d(r,{kN:()=>f,w7:()=>p}),t(1940);var n=t(5089),a=t(3156),s=t(1412),o=t(6102),i=t(3800);t(7540);var l=t(1258);t(3417);var u=t(4158);function c(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(c=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,a=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===a)return a=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(s).then(r,function(e){return t(e),r()})}else a|=1}catch(e){t(e)}if(1===a)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function f(e){let{serialize:r=s.D_}=e,t={enabled:e.ping?.enabled??!1,intervalMs:e.ping?.intervalMs??1e3},c=e.client??{};if(t.enabled&&c.reconnectAfterInactivityMs&&t.intervalMs>c.reconnectAfterInactivityMs)throw Error(`Ping interval must be less than client reconnect interval to prevent unnecessary reconnection - ping.intervalMs: ${t.intervalMs} client.reconnectAfterInactivityMs: ${c.reconnectAfterInactivityMs}`);async function*f(){let n,a;yield{event:"connected",data:JSON.stringify(c)};let s=e.data;for await(n of(e.emitAndEndImmediately&&(s=(0,i.C$)(s,{count:1,gracePeriodMs:1})),e.maxDurationMs&&e.maxDurationMs>0&&e.maxDurationMs!==1/0&&(s=(0,i.H9)(s,{maxDurationMs:e.maxDurationMs})),t.enabled&&t.intervalMs!==1/0&&t.intervalMs>0&&(s=(0,u.r)(s,t.intervalMs)),s)){if(n===u.J){yield{event:"ping",data:""};continue}(a=(0,o.vJ)(n)?{id:n[0],data:n[1]}:{data:n}).data=JSON.stringify(r(a.data)),yield a,n=null,a=null}}async function*p(){try{yield*f(),yield{event:"return",data:""}}catch(o){if((0,a.z)(o))return;let t=(0,n.qO)(o),s=e.formatError?.({error:t})??null;yield{event:"serialized-error",data:JSON.stringify(r(s))}}}return(0,l.d)(p()).pipeThrough(new TransformStream({transform(e,r){"event"in e&&r.enqueue(`event: ${e.event}
`),"data"in e&&r.enqueue(`data: ${e.data}
`),"id"in e&&r.enqueue(`id: ${e.id}
`),"comment"in e&&r.enqueue(`: ${e.comment}
`),r.enqueue("\n\n")}})).pipeThrough(new TextEncoderStream)}let p={"Content-Type":"text/event-stream","Cache-Control":"no-cache, no-transform","X-Accel-Buffering":"no",Connection:"keep-alive"}},3800:(e,r,t)=>{t.d(r,{C$:()=>f,H9:()=>c,X4:()=>u});var n=t(1940),a=t(3156),s=t(7540),o=t(3417);function i(e,r,t){if(null!=r){var n,a;if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Object expected.");if(t){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(a=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else t&&e.stack.push({async:!0});return r}function l(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(l=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,a=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===a)return a=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(s).then(r,function(e){return t(e),r()})}else a|=1}catch(e){t(e)}if(1===a)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function u(e){let r=e[Symbol.asyncIterator]();return r[Symbol.asyncDispose]?r:(0,s.j)(r,async()=>{await r.return?.()})}async function*c(e,r){let t={stack:[],error:void 0,hasError:!1};try{let s,l=i(t,u(e),!0),c=i(t,(0,o._)(r.maxDurationMs),!1).start();for(;;){if((s=await n.V.race([l.next(),c]))===o.s&&(0,a.P)(),s.done)return s;yield s.value,s=null}}catch(e){t.error=e,t.hasError=!0}finally{let e=l(t);e&&await e}}async function*f(e,r){let t={stack:[],error:void 0,hasError:!1};try{let s,l=i(t,u(e),!0),c=i(t,(0,o._)(r.gracePeriodMs),!1),f=r.count,p=new Promise(()=>{});for(;;){if((s=await n.V.race([l.next(),p]))===o.s&&(0,a.P)(),s.done)return s.value;yield s.value,0==--f&&(p=c.start()),s=null}}catch(e){t.error=e,t.hasError=!0}finally{let e=l(t);e&&await e}}},4158:(e,r,t)=>{t.d(r,{J:()=>l,r:()=>u});var n=t(1940),a=t(3800),s=t(3417);function o(e,r,t){if(null!=r){var n,a;if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Object expected.");if(t){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(a=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else t&&e.stack.push({async:!0});return r}function i(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(i=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,a=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===a)return a=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(s).then(r,function(e){return t(e),r()})}else a|=1}catch(e){t(e)}if(1===a)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}let l=Symbol("ping");async function*u(e,r){let t={stack:[],error:void 0,hasError:!1};try{let u,c=o(t,(0,a.X4)(e),!0),f=c.next();for(;;){let e={stack:[],error:void 0,hasError:!1};try{let t=o(e,(0,s._)(r),!1);if((u=await n.V.race([f,t.start()]))===s.s){yield l;continue}if(u.done)return u.value;f=c.next(),yield u.value,u=null}catch(r){e.error=r,e.hasError=!0}finally{i(e)}}}catch(e){t.error=e,t.hasError=!0}finally{let e=i(t);e&&await e}}},4355:(e,r,t)=>{t.d(r,{v:()=>s});let n=()=>{},a=e=>{Object.freeze&&Object.freeze(e)},s=e=>(function e(r,t,s){let o=t.join(".");return s[o]??(s[o]=new Proxy(n,{get(n,a){if("string"==typeof a&&"then"!==a)return e(r,[...t,a],s)},apply(e,n,s){let o=t[t.length-1],i={args:s,path:t};return"call"===o?i={args:s.length>=2?[s[1]]:[],path:t.slice(0,-1)}:"apply"===o&&(i={args:s.length>=2?s[1]:[],path:t.slice(0,-1)}),a(i.args),a(i.path),r(i)}})),s[o]})(e,[],Object.create(null))},5089:(e,r,t)=>{t.d(r,{gt:()=>i,qO:()=>o});var n=t(1412);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class s extends Error{}function o(e){if(e instanceof i||e instanceof Error&&"TRPCError"===e.name)return e;let r=new i({code:"INTERNAL_SERVER_ERROR",cause:e});return e instanceof Error&&e.stack&&(r.stack=e.stack),r}class i extends Error{constructor(e){let r=function(e){if(e instanceof Error)return e;let r=typeof e;if("undefined"!==r&&"function"!==r&&null!==e){if("object"!==r)return Error(String(e));if((0,n.Gv)(e))return Object.assign(new s,e)}}(e.cause);super(e.message??r?.message??e.code,{cause:r}),a(this,"cause",void 0),a(this,"code",void 0),this.code=e.code,this.name="TRPCError",this.cause??(this.cause=r)}}},5318:(e,r,t)=>{t.d(r,{Iw:()=>p,OA:()=>d,OX:()=>f,ri:()=>y});var n=t(4355),a=t(9534),s=t(5089),o=t(2058),i=t(1412);let l=Symbol("lazy"),u={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:a.E,transformer:o.bJ},c=["then","call","apply"];function f(e){return function(r){let t=new Set(Object.keys(r).filter(e=>c.includes(e)));if(t.size>0)throw Error("Reserved words used in `router({})` call: "+Array.from(t).join(", "));let n=(0,i.QQ)({}),a=(0,i.QQ)({}),s=function e(r,t=[]){let s=(0,i.QQ)({});for(let[u,c]of Object.entries(r??{})){var o;if("function"==typeof c&&l in c){a[[...t,u].join(".")]=function r(t){return{ref:t.ref,load:function(e){let r=Symbol(),t=r;return()=>(t===r&&(t=e()),t)}(async()=>{let n=await t.ref(),s=[...t.path,t.key],o=s.join(".");for(let[i,l]of(t.aggregate[t.key]=e(n._def.record,s),delete a[o],Object.entries(n._def.lazy)))a[[...s,i].join(".")]=r({ref:l.ref,path:s,key:i,aggregate:t.aggregate[t.key]})})}}({path:t,ref:c,key:u,aggregate:s});continue}if(o=c,(0,i.Gv)(o)&&(0,i.Gv)(o._def)&&"router"in o._def){s[u]=e(c._def.record,[...t,u]);continue}if(!function(e){return"function"==typeof e}(c)){s[u]=e(c,[...t,u]);continue}let r=[...t,u].join(".");if(n[r])throw Error(`Duplicate key: ${r}`);n[r]=c,s[u]=c}return s}(r),o={_config:e,router:!0,procedures:n,lazy:a,...u,record:s};return{...s,_def:o,createCaller:d()({_def:o})}}}async function p(e,r){let{_def:t}=e,n=t.procedures[r];for(;!n;){let e=Object.keys(t.lazy).find(e=>r.startsWith(e));if(!e)return null;let a=t.lazy[e];await a.load(),n=t.procedures[r]}return n}function d(){return function(e){let{_def:r}=e;return function(t,a){return(0,n.v)(async({path:n,args:o})=>{let l,u=n.join(".");if(1===n.length&&"_def"===n[0])return r;let c=await p(e,u);try{if(!c)throw new s.gt({code:"NOT_FOUND",message:`No procedure found on path "${n}"`});return l=(0,i.Tn)(t)?await Promise.resolve(t()):t,await c({path:u,getRawInput:async()=>o[0],ctx:l,type:c._def.type,signal:a?.signal})}catch(e){throw a?.onError?.({ctx:l,error:(0,s.qO)(e),input:o[0],path:u,type:c?._def.type??"unknown"}),e}})}}}function y(...e){let r=(0,i.uf)({},...e.map(e=>e._def.record));return f({errorFormatter:e.reduce((e,r)=>{if(r._def._config.errorFormatter&&r._def._config.errorFormatter!==a.E){if(e!==a.E&&e!==r._def._config.errorFormatter)throw Error("You seem to have several error formatters");return r._def._config.errorFormatter}return e},a.E),transformer:e.reduce((e,r)=>{if(r._def._config.transformer&&r._def._config.transformer!==o.bJ){if(e!==o.bJ&&e!==r._def._config.transformer)throw Error("You seem to have several transformers");return r._def._config.transformer}return e},o.bJ),isDev:e.every(e=>e._def._config.isDev),allowOutsideOfServer:e.every(e=>e._def._config.allowOutsideOfServer),isServer:e.every(e=>e._def._config.isServer),$types:e[0]?._def._config.$types})(r)}},5409:(e,r,t)=>{t.d(r,{l$:()=>s,lL:()=>i,py:()=>o,yU:()=>l});var n=t(5089),a=t(1412);let s="middlewareMarker";function o(){return function(e){return function e(r){return{_middlewares:r,unstable_pipe:t=>e([...r,..."_middlewares"in t?t._middlewares:[t]])}}([e])}}function i(e){let r=async function(r){let t,s=await r.getRawInput();try{t=await e(s)}catch(e){throw new n.gt({code:"BAD_REQUEST",cause:e})}let o=(0,a.Gv)(r.input)&&(0,a.Gv)(t)?{...r.input,...t}:t;return r.next({input:o})};return r._type="input",r}function l(e){let r=async function({next:r}){let t=await r();if(!t.ok)return t;try{let r=await e(t.data);return{...t,data:r}}catch(e){throw new n.gt({message:"Output validation failed",code:"INTERNAL_SERVER_ERROR",cause:e})}};return r._type="output",r}},5722:(e,r,t)=>{t.d(r,{yL:()=>p,jU:()=>h});var n=t(1412),a=t(3800),s=t(7540);function o(){let e,r;return{promise:new Promise((t,n)=>{e=t,r=n}),resolve:e,reject:r}}function i(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(i=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,a=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===a)return a=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(s).then(r,function(e){return t(e),r()})}else a|=1}catch(e){t(e)}if(1===a)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}var l=t(1258),u=t(4158);function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function f(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(f=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,a=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===a)return a=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(s).then(r,function(e){return t(e),r()})}else a|=1}catch(e){t(e)}if(1===a)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function p(e){return((0,n.Gv)(e)||(0,n.Tn)(e))&&"function"==typeof e?.then&&"function"==typeof e?.catch}class d extends Error{constructor(e){super("Max depth reached at path: "+e.join(".")),c(this,"path",void 0),this.path=e}}async function*y(e){let{data:r}=e,t=0,l=function(){let e="idle",r=o(),t=[],n=new Set,a=[];function l(t){if("pending"!==e)return;let s=function(e,r){let t=e[Symbol.asyncIterator](),n="idle";function a(){n="done",r=()=>{}}return{pull:function(){"idle"===n&&(n="pending",t.next().then(e=>{if(e.done){n="done",r({status:"return",value:e.value}),a();return}n="idle",r({status:"yield",value:e.value})}).catch(e=>{r({status:"error",error:e}),a()}))},destroy:async()=>{a(),await t.return?.()}}}(t,t=>{if("pending"===e){switch(t.status){case"yield":a.push([s,t]);break;case"return":n.delete(s);break;case"error":a.push([s,t]),n.delete(s)}r.resolve()}});n.add(s),s.pull()}return{add(r){switch(e){case"idle":t.push(r);break;case"pending":l(r)}},async *[Symbol.asyncIterator](){let u={stack:[],error:void 0,hasError:!1};try{if("idle"!==e)throw Error("Cannot iterate twice");for(e="pending",!function(e,r,t){if(null!=r){var n,a;if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Object expected.");if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");if(void 0===(n=r[Symbol.asyncDispose])){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");a=n=r[Symbol.dispose]}if("function"!=typeof n)throw TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else e.stack.push({async:!0})}(u,(0,s.j)({},async()=>{e="done";let t=[];if(await Promise.all(Array.from(n.values()).map(async e=>{try{await e.destroy()}catch(e){t.push(e)}})),a.length=0,n.clear(),r.resolve(),t.length>0)throw AggregateError(t)}),!0);t.length>0;)l(t.shift());for(;n.size>0;){for(await r.promise;a.length>0;){let[e,r]=a.shift();switch(r.status){case"yield":yield r.value,e.pull();break;case"error":throw r.error}}r=o()}}catch(e){u.error=e,u.hasError=!0}finally{let e=i(u);e&&await e}}}}();function c(e){let r=t++,n=e(r);return l.add(n),r}function y(r){return e.maxDepth&&r.length>e.maxDepth?new d(r):null}function h(r,t){var s;if(p(r))return[0,(s=r,c(async function*(r){let n=y(t);n&&(s.catch(r=>{e.onError?.({error:r,path:t})}),s=Promise.reject(n));try{let e=await s;yield[r,0,m(e,t)]}catch(n){e.onError?.({error:n,path:t}),yield[r,1,e.formatError?.({error:n,path:t})]}}))];if((0,n.Td)(r)){if(e.maxDepth&&t.length>=e.maxDepth)throw Error("Max depth reached");return[1,c(async function*(n){let s={stack:[],error:void 0,hasError:!1};try{let o=y(t);if(o)throw o;let i=function(e,r,t){if(null!=r){var n,a;if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Object expected.");if(t){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(a=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else t&&e.stack.push({async:!0});return r}(s,(0,a.X4)(r),!0);try{for(;;){let e=await i.next();if(e.done){yield[n,0,m(e.value,t)];break}yield[n,1,m(e.value,t)]}}catch(r){e.onError?.({error:r,path:t}),yield[n,2,e.formatError?.({error:r,path:t})]}}catch(e){s.error=e,s.hasError=!0}finally{let e=f(s);e&&await e}})]}return null}function m(e,r){if(void 0===e)return[[]];let t=h(e,r);if(t)return[[0],[null,...t]];if("[object Object]"!==Object.prototype.toString.call(e))return[[e]];let n={},a=[];for(let[t,s]of Object.entries(e)){let e=h(s,[...r,t]);if(!e){n[t]=s;continue}n[t]=0,a.push([t,...e])}return[[n],...a]}let E={};for(let[e,t]of Object.entries(r))E[e]=m(t,[e]);yield E;let g=l;for await(let r of(e.pingMs&&(g=(0,u.r)(l,e.pingMs)),g))yield r}function h(e){let r=(0,l.d)(y(e)),{serialize:t}=e;return t&&(r=r.pipeThrough(new TransformStream({transform(e,r){e===u.J?r.enqueue(u.J):r.enqueue(t(e))}}))),r.pipeThrough(new TransformStream({transform(e,r){e===u.J?r.enqueue(" "):r.enqueue(JSON.stringify(e)+"\n")}})).pipeThrough(new TextEncoderStream)}},6071:(e,r,t)=>{t.d(r,{G:()=>c});var n=t(5089),a=t(5318),s=t(1412),o=t(1243);function i(e){let r=null,t=s.IT;return{read:async()=>(t!==s.IT||(r??(r=e().catch(e=>{if(e instanceof n.gt)throw e;throw new n.gt({code:"BAD_REQUEST",message:e instanceof Error?e.message:"Invalid input",cause:e})})),t=await r,r=null),t),result:()=>t!==s.IT?t:void 0}}let l={isMatch:e=>!!e.headers.get("content-type")?.startsWith("application/json"),async parse(e){let{req:r}=e,t="1"===e.searchParams.get("batch"),l=t?e.path.split(","):[e.path],u=i(async()=>{let a;if("GET"===r.method){let r=e.searchParams.get("input");r&&(a=JSON.parse(r))}else a=await r.json();if(void 0===a)return{};if(!t)return{0:e.router._def._config.transformer.input.deserialize(a)};if(!(0,s.Gv)(a))throw new n.gt({code:"BAD_REQUEST",message:'"input" needs to be an object when doing a batch call'});let o={};for(let r of l.keys()){let t=a[r];void 0!==t&&(o[r]=e.router._def._config.transformer.input.deserialize(t))}return o}),c=await Promise.all(l.map(async(r,t)=>{let n=await (0,a.Iw)(e.router,r);return{path:r,procedure:n,getRawInput:async()=>{let r=(await u.read())[t];if(n?._def.type==="subscription"){let t=e.headers.get("last-event-id")??e.searchParams.get("lastEventId")??e.searchParams.get("Last-Event-Id");t&&((0,s.Gv)(r)?r={...r,lastEventId:t}:r??(r={lastEventId:t}))}return r},result:()=>u.result()?.[t]}})),f=new Set(c.map(e=>e.procedure?._def.type).filter(Boolean));if(f.size>1)throw new n.gt({code:"BAD_REQUEST",message:`Cannot mix procedure types in call: ${Array.from(f).join(", ")}`});let p=f.values().next().value??"unknown",d=e.searchParams.get("connectionParams");return{isBatchCall:t,accept:r.headers.get("trpc-accept"),calls:c,type:p,connectionParams:null===d?null:(0,o.z)(d),signal:r.signal,url:e.url}}},u=[l,{isMatch:e=>!!e.headers.get("content-type")?.startsWith("multipart/form-data"),async parse(e){let{req:r}=e;if("POST"!==r.method)throw new n.gt({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for multipart/form-data requests"});let t=i(async()=>await r.formData()),s=await (0,a.Iw)(e.router,e.path);return{accept:null,calls:[{path:e.path,getRawInput:t.read,result:t.result,procedure:s}],isBatchCall:!1,type:"mutation",connectionParams:null,signal:r.signal,url:e.url}}},{isMatch:e=>!!e.headers.get("content-type")?.startsWith("application/octet-stream"),async parse(e){let{req:r}=e;if("POST"!==r.method)throw new n.gt({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for application/octet-stream requests"});let t=i(async()=>r.body);return{calls:[{path:e.path,getRawInput:t.read,result:t.result,procedure:await (0,a.Iw)(e.router,e.path)}],isBatchCall:!1,accept:null,type:"mutation",connectionParams:null,signal:r.signal,url:e.url}}}];async function c(e){let r=function(e){let r=u.find(r=>r.isMatch(e));if(r)return r;if(!r&&"GET"===e.method)return l;throw new n.gt({code:"UNSUPPORTED_MEDIA_TYPE",message:e.headers.has("content-type")?`Unsupported content-type "${e.headers.get("content-type")}`:"Missing content-type header"})}(e.req);return await r.parse(e)}},6102:(e,r,t)=>{t.d(r,{vJ:()=>a});let n=Symbol();function a(e){return Array.isArray(e)&&e[2]===n}},6576:(e,r,t)=>{t.d(r,{i:()=>a});var n=t(8157);function a(e){let r="~standard"in e;if("function"==typeof e&&"function"==typeof e.assert)return e.assert.bind(e);if("function"==typeof e&&!r)return e;if("function"==typeof e.parseAsync)return e.parseAsync.bind(e);if("function"==typeof e.parse)return e.parse.bind(e);if("function"==typeof e.validateSync)return e.validateSync.bind(e);if("function"==typeof e.create)return e.create.bind(e);if("function"==typeof e.assert)return r=>(e.assert(r),r);if(r)return async r=>{let t=await e["~standard"].validate(r);if(t.issues)throw new n.e(t.issues);return t.value};throw Error("Could not find a validator fn")}},7082:(e,r,t)=>{t.d(r,{Al:()=>a.A,gt:()=>n.gt}),t(8945);var n=t(5089);t(5318),t(1940),t(7540),t(6102),t(2058);var a=t(8806);t(5409),t(8157),t(8567)},7540:(e,r,t)=>{var n,a;function s(e,r){let t=e[Symbol.dispose];return e[Symbol.dispose]=()=>{r(),t?.()},e}function o(e,r){let t=e[Symbol.asyncDispose];return e[Symbol.asyncDispose]=async()=>{await r(),await t?.()},e}t.d(r,{T:()=>s,j:()=>o}),(n=Symbol).dispose??(n.dispose=Symbol()),(a=Symbol).asyncDispose??(a.asyncDispose=Symbol())},8037:(e,r,t)=>{t.d(r,{E$:()=>o,aV:()=>i});var n=t(2493),a=t(1412);let s={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504};function o(e){let r=new Set((Array.isArray(e)?e:[e]).map(e=>{if("error"in e&&(0,a.Gv)(e.error.data))return"number"==typeof e.error.data?.httpStatus?e.error.data.httpStatus:s[n.u[e.error.code]]??500;return 200}));return 1!==r.size?207:r.values().next().value}function i(e){return s[e.code]??500}},8157:(e,r,t)=>{t.d(r,{e:()=>n});class n extends Error{constructor(e){super(e[0]?.message),function(e,r,t){r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t}(this,"issues",void 0),this.name="SchemaError",this.issues=e}}},8567:(e,r,t)=>{t.d(r,{N:()=>n});let n="undefined"==typeof window||"Deno"in window||globalThis.process?.env?.NODE_ENV==="test"||!!globalThis.process?.env?.JEST_WORKER_ID||!!globalThis.process?.env?.VITEST_WORKER_ID},8806:(e,r,t)=>{t.d(r,{A:()=>c});var n=t(9534),a=t(5409),s=t(9085),o=t(8567),i=t(5318),l=t(2058);class u{context(){return new u}meta(){return new u}create(e){let r={...e,transformer:(0,l.u$)(e?.transformer??l.bJ),isDev:e?.isDev??globalThis.process?.env.NODE_ENV!=="production",allowOutsideOfServer:e?.allowOutsideOfServer??!1,errorFormatter:e?.errorFormatter??n.E,isServer:e?.isServer??o.N,$types:null};if(!(e?.isServer??o.N)&&e?.allowOutsideOfServer!==!0)throw Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.");return{_config:r,procedure:(0,s.I)({meta:e?.defaultMeta}),middleware:(0,a.py)(),router:(0,i.OX)(r),mergeRouters:i.ri,createCallerFactory:(0,i.OA)()}}}let c=new u},8945:(e,r,t)=>{t.d(r,{K:()=>s});var n=t(8037),a=t(2493);function s(e){let{path:r,error:t,config:s}=e,{code:o}=e.error,i={message:t.message,code:a.Y[o],data:{code:o,httpStatus:(0,n.aV)(t)}};return s.isDev&&"string"==typeof e.error.stack&&(i.data.stack=e.error.stack),"string"==typeof r&&(i.data.path=r),s.errorFormatter({...e,shape:i})}},9085:(e,r,t)=>{t.d(r,{I:()=>l});var n=t(5089),a=t(5409),s=t(6576),o=t(1412);function i(e,r){let{middlewares:t=[],inputs:n,meta:a,...s}=r;return l({...(0,o.uf)(e,s),inputs:[...e.inputs,...n??[]],middlewares:[...e.middlewares,...t],meta:e.meta&&a?{...e.meta,...a}:a??e.meta})}function l(e={}){let r={procedure:!0,inputs:[],middlewares:[],...e};return{_def:r,input(e){let t=(0,s.i)(e);return i(r,{inputs:[e],middlewares:[(0,a.lL)(t)]})},output(e){let t=(0,s.i)(e);return i(r,{output:e,middlewares:[(0,a.yU)(t)]})},meta:e=>i(r,{meta:e}),use:e=>i(r,{middlewares:"_middlewares"in e?e._middlewares:[e]}),unstable_concat:e=>i(r,e._def),concat:e=>i(r,e._def),query:e=>u({...r,type:"query"},e),mutation:e=>u({...r,type:"mutation"},e),subscription:e=>u({...r,type:"subscription"},e),experimental_caller:e=>i(r,{caller:e})}}function u(e,r){let t=i(e,{resolver:r,middlewares:[async function(e){let t=await r(e);return{marker:a.l$,ok:!0,data:t,ctx:e.ctx}}]}),s={...t._def,type:e.type,experimental_caller:!!t._def.caller,meta:t._def.meta,$types:null},o=function(e){async function r(r){if(!r||!("getRawInput"in r))throw Error(c);let t=await f(0,e,r);if(!t)throw new n.gt({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!t.ok)throw t.error;return t.data}return r._def=e,r.procedure=!0,r.meta=e.meta,r}(t._def),l=t._def.caller;if(!l)return o;let u=async(...e)=>await l({args:e,invoke:o,_def:s});return u._def=s,u}let c=`
This is a client-only function.
If you want to call this function on the server, see https://trpc.io/docs/v11/server/server-side-calls
`.trim();async function f(e,r,t){try{let n=r.middlewares[e];return await n({...t,meta:r.meta,input:t.input,next:n=>f(e+1,r,{...t,ctx:n?.ctx?{...t.ctx,...n.ctx}:t.ctx,input:n&&"input"in n?n.input:t.input,getRawInput:n?.getRawInput??t.getRawInput})})}catch(e){return{ok:!1,error:(0,n.qO)(e),marker:a.l$}}}},9534:(e,r,t)=>{t.d(r,{E:()=>n});let n=({shape:e})=>e}};