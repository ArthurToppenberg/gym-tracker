(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[854],{679:(e,t,s)=>{"use strict";let r;s.d(t,{TRPCReactProvider:()=>v,F:()=>p});var n=s(1753),i=s(2890),a=s(3263),u=s(6215),l=s(1285),o=s(8493),d=s(8616),c=s(5899);let h=()=>new d.E({defaultOptions:{queries:{staleTime:3e4},dehydrate:{serializeData:l.Ay.serialize,shouldDehydrateQuery:e=>(0,c.XS)(e)||"pending"===e.state.status},hydrate:{deserializeData:l.Ay.deserialize}}});s(8499);let f=()=>(null!=r||(r=h()),r),p=(0,u.pY)();function v(e){let t=f(),[s]=(0,o.useState)(()=>p.createClient({links:[(0,a.$H)({enabled:e=>"down"===e.direction&&e.result instanceof Error}),(0,a.N9)({transformer:l.Ay,url:window.location.origin+"/api/trpc",headers:()=>{let e=new Headers;return e.set("x-trpc-source","nextjs-react"),e}})]}));return(0,n.jsx)(i.QueryClientProvider,{client:t,children:(0,n.jsx)(p.Provider,{client:s,queryClient:t,children:e.children})})}},3365:(e,t,s)=>{"use strict";s.d(t,{useIsMutating:()=>u,useMutationState:()=>o});var r=s(8493),n=s(4596),i=s(3469),a=s(2890);function u(e,t){let s=(0,a.useQueryClient)(t);return o({filters:{...e,status:"pending"}},s).length}function l(e,t){return e.findAll(t.filters).map(e=>t.select?t.select(e):e.state)}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,s=(0,a.useQueryClient)(t).getMutationCache(),u=r.useRef(e),o=r.useRef(null);return o.current||(o.current=l(s,e)),r.useEffect(()=>{u.current=e}),r.useSyncExternalStore(r.useCallback(e=>s.subscribe(()=>{let t=(0,n.BH)(o.current,l(s,u.current));o.current!==t&&(o.current=t,i.jG.schedule(e))}),[s]),()=>o.current,()=>o.current)}},4181:(e,t,s)=>{"use strict";s.d(t,{LatestPost:()=>a});var r=s(1753),n=s(8493),i=s(679);function a(){let[e]=i.F.post.getLatest.useSuspenseQuery(),t=i.F.useUtils(),[s,a]=(0,n.useState)(""),u=i.F.post.create.useMutation({onSuccess:async()=>{await t.post.invalidate(),a("")}});return(0,r.jsxs)("div",{className:"w-full max-w-xs",children:[e?(0,r.jsxs)("p",{className:"truncate",children:["Your most recent post: ",e.name]}):(0,r.jsx)("p",{children:"You have no posts yet."}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u.mutate({name:s})},className:"flex flex-col gap-2",children:[(0,r.jsx)("input",{type:"text",placeholder:"Title",value:s,onChange:e=>a(e.target.value),className:"w-full rounded-full bg-white/10 px-4 py-2 text-white"}),(0,r.jsx)("button",{type:"submit",className:"rounded-full bg-white/10 px-10 py-3 font-semibold transition hover:bg-white/20",disabled:u.isPending,children:u.isPending?"Submitting...":"Submit"})]})]})}},4904:(e,t,s)=>{"use strict";s.d(t,{HydrationBoundary:()=>a});var r=s(8493),n=s(5899),i=s(2890),a=e=>{let{children:t,options:s={},state:a,queryClient:u}=e,l=(0,i.useQueryClient)(u),[o,d]=r.useState(),c=r.useRef(s);return c.current=s,r.useMemo(()=>{if(a){if("object"!=typeof a)return;let e=l.getQueryCache(),t=a.queries||[],s=[],r=[];for(let n of t){let t=e.get(n.queryHash);if(t){let e=n.state.dataUpdatedAt>t.state.dataUpdatedAt||n.promise&&"pending"!==t.state.status&&"fetching"!==t.state.fetchStatus&&void 0!==n.dehydratedAt&&n.dehydratedAt>t.state.dataUpdatedAt,s=null==o?void 0:o.find(e=>e.queryHash===n.queryHash);e&&(!s||n.state.dataUpdatedAt>s.state.dataUpdatedAt)&&r.push(n)}else s.push(n)}s.length>0&&(0,n.Qv)(l,{queries:s},c.current),r.length>0&&d(e=>e?[...e,...r]:r)}},[l,o,a]),r.useEffect(()=>{o&&((0,n.Qv)(l,{queries:o},c.current),d(void 0))},[l,o]),t}},6559:(e,t,s)=>{Promise.resolve().then(s.bind(s,4181)),Promise.resolve().then(s.bind(s,4904)),Promise.resolve().then(s.bind(s,6352)),Promise.resolve().then(s.bind(s,2890)),Promise.resolve().then(s.bind(s,531)),Promise.resolve().then(s.bind(s,177)),Promise.resolve().then(s.bind(s,6855)),Promise.resolve().then(s.bind(s,5905)),Promise.resolve().then(s.bind(s,3365)),Promise.resolve().then(s.bind(s,9519)),Promise.resolve().then(s.bind(s,2809)),Promise.resolve().then(s.bind(s,1009)),Promise.resolve().then(s.bind(s,4361)),Promise.resolve().then(s.bind(s,5737)),Promise.resolve().then(s.t.bind(s,7424,23))},6855:(e,t,s)=>{"use strict";s.d(t,{useIsFetching:()=>a});var r=s(8493),n=s(3469),i=s(2890);function a(e,t){let s=(0,i.useQueryClient)(t),a=s.getQueryCache();return r.useSyncExternalStore(r.useCallback(e=>a.subscribe(n.jG.batchCalls(e)),[a]),()=>s.isFetching(e),()=>s.isFetching(e))}}},e=>{var t=t=>e(e.s=t);e.O(0,[424,147,365,302,358],()=>t(6559)),_N_E=e.O()}]);